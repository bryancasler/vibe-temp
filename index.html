<html>
    <head>
        <link rel="stylesheet" href="styles.css">

        <!-- Chart.js CDN -->
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    </head>
    <body>


        <div class="vibe-card">
        <header class="vibe-header">
            <div class="title-wrap">
            <h2>Vibe Temp</h2>
            <p class="sub">How it actually feels in shade and sun</p>
            </div>
            <div class="unit-toggle" role="group" aria-label="Temperature units">
            <button id="unitF" class="unit-btn active" type="button">°F</button>
            <button id="unitC" class="unit-btn" type="button">°C</button>
            </div>
        </header>

        <!-- Top metrics -->
        <section class="results">
            <div class="card" id="currentTimeCard">
            <h3 id="currentTimeTitle">Current Time</h3>
            <div class="big" id="nowTime">—:—</div>
            <div class="label" id="nowSubLabel">Loading sunrise/sunset…</div>
            </div>
            <div class="card" id="shadeCard">
            <h3>Shade Vibe</h3>
            <div class="big" id="shade">—</div>
            <div class="label" id="shadeLabel">Waiting…</div>
            </div>
            <div class="card" id="sunCard">
            <h3>Sun Vibe</h3>
            <div class="big" id="sun">—</div>
            <div class="label" id="sunLabel">Waiting…</div>
            </div>
        </section>

        <!-- Timeline -->
        <section class="timeline">
            <h3 class="timeline-title">Vibe Timeline (today + tomorrow)</h3>
            <canvas id="vibeChart"></canvas>
            <div class="tiny" id="chartStatus">Load your location or set a ZIP to see the timeline. Hold “c” while hovering to simulate.</div>
        </section>

        <!-- Advanced config (collapsed by default) -->
        <details class="advanced">
            <summary>Advanced Configuration</summary>

            <section class="row">
            <button id="use-location" type="button">Use my location</button>
            <div class="status" id="status">Waiting…</div>
            </section>

            <section class="row">
            <label class="inline" style="gap:8px;">
                ZIP (US):
                <input id="zipInput" type="text" inputmode="numeric" pattern="[0-9]*" maxlength="10" placeholder="e.g. 20001" />
            </label>
            <button id="use-zip" type="button">Use ZIP</button>
            <button id="clear-zip" type="button" title="Clear ZIP and return to device location">Clear ZIP</button>
            <div class="status" id="zipStatus"></div>
            </section>

            <!-- Update scheduler controls -->
            <section class="scheduler">
            <div class="schedule-grid">
                <div class="sched-item">
                <div class="sched-label">Last updated</div>
                <div class="sched-value" id="lastUpdated">—</div>
                </div>
                <div class="sched-item">
                <div class="sched-label">Next update</div>
                <div class="sched-value" id="nextUpdated">—</div>
                </div>
                <div class="sched-item">
                <label class="inline">
                    Update every
                    <input id="updateInterval" type="number" min="0.5" step="0.5" value="1" />
                    <span>min</span>
                </label>
                </div>
                <div class="sched-item">
                <label class="inline">
                    <input id="updateHourlyToggle" type="checkbox" checked />
                    <span>Refresh hourly forecast each cycle</span>
                </label>
                </div>
                <div class="sched-item sched-actions">
                <button id="updateNow" type="button">Update now</button>
                </div>
            </div>
            <small class="tiny">Tip: 1 min feels realtime. Increase if multiple tabs are open.</small>
            </section>

            <section class="grid">
            <label>
                Air Temp (°F)
                <input id="temp" type="number" step="0.1" placeholder="e.g. 78" />
            </label>

            <label>
                Humidity (%)
                <input id="humidity" type="number" step="1" placeholder="e.g. 60" />
            </label>

            <label>
                Wind (mph)
                <input id="wind" type="number" step="0.1" placeholder="e.g. 4" />
            </label>

            <label>
                Solar exposure
                <input id="solar" type="range" min="0" max="1" step="0.1" value="1" />
                <small><span id="solarVal">1.0</span> — 0 shade to 1 full sun (auto from UV/clouds)</small>
            </label>

            <label>
                Surface reflectivity
                <select id="reflect">
                <option value="0.10">Grass or soil</option>
                <option value="0.20" selected>Sidewalk</option>
                <option value="0.35">Asphalt</option>
                <option value="0.40">Beach sand</option>
                <option value="0.80">Snow or white surface</option>
                <option value="0.00">Custom… set below</option>
                </select>
            </label>

            <label>
                Custom reflectivity (0–1)
                <input id="reflectCustom" type="number" min="0" max="1" step="0.05" value="0.20" />
            </label>
            </section>

            <!-- Formula always visible -->
            <section class="formula">
            <h4 class="formula-title">Vibe Temp Formula</h4>
            <pre><code>ShadeVibe = T + (RH - 40) / 15 - 0.7 * Wind
        SunVibe   = ShadeVibe + 8 * SolarExposure + 4 * Reflectivity</code></pre>
            </section>
        </details>
        </div>

        <script src="scripts.js"></script>
    </body>
</html>