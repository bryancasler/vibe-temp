<html>
    <head>
        <link rel="stylesheet" href="styles.css">
        <script src="scripts.js"></script>
        <meta
  name="viewport"
  content="width=device-width, initial-scale=1, viewport-fit=cover, interactive-widget=resizes-content"
/>
    </head>
    <body>
        <div class="app">
            <header class="header">
              <div class="headline-wrap">
                <h1 class="headline">
                  Vibe Temp
                  <span class="sub">How it actually feels in shade and sun</span>
                </h1>
              </div>
          
              <!-- Unit toggle (saved to localStorage and syncs across tabs) -->
              <div class="unit-toggle" aria-label="Units">
                <button id="unitF" class="unit-btn" type="button">Â°F</button>
                <button id="unitC" class="unit-btn" type="button">Â°C</button>
              </div>
            </header>
          
            <!-- Three cards in one row -->
            <section class="cards">
              <article class="card card--now">
                <h3 class="card-title" id="currentTimeTitle">Current Time</h3>
                <div class="card-temp card-temp--now">
                  <span id="nowTime">--:--</span>
                </div>
                <div class="card-desc">
                  <small id="nowSubLabel" class="now-time__sub">â€”</small>
                </div>
              </article>
          
              <article class="card card--shade">
                <h3 class="card-title">Shade Vibe</h3>
                <div class="card-temp" id="shade">â€”</div>
                <div class="card-desc" id="shadeLabel">Loadingâ€¦</div>
              </article>
          
              <article class="card card--sun" id="sunCard">
                <h3 class="card-title">Sun Vibe</h3>
                <div class="card-temp" id="sun">â€”</div>
                <div class="card-desc" id="sunLabel">Loadingâ€¦</div>
              </article>
            </section>
          
            <!-- Weather Summary -->
            <section id="weatherSummary" class="weather-summary" style="display: none;">
              <div class="summary-content">
                <h3 class="summary-title">Highlighted Vibes</h3>
                <div id="summaryTimeRange" class="summary-time-range"></div>
                <div id="summaryText" class="summary-text">Generating summary...</div>
              </div>
            </section>
          
            <!-- Chart -->
            <section class="chart-wrap">
              <div class="chart-head">
                <div class="chart-title">Today & Tomorrow</div>
                <div class="chart-status" id="chartStatus">Loading timelineâ€¦</div>
              </div>
              <div class="chart-box" id="chartBox">
                <canvas id="vibeChart"></canvas>
                <button id="clearHighlight" class="clear-highlight-btn" style="display: none;" type="button">Clear Highlight</button>
              </div>
              <div class="chart-note">
                <small>ðŸ’¡ Tip: Hold Shift (or Ctrl/Cmd) and drag on the graph to select a time range and share it</small>
              </div>
            </section>
          
            <!-- Status & quick controls -->
            <section class="controls">
              <div class="controls-left">
                <button id="use-location" class="btn">Use My Location</button>
                <div id="status" class="status">Trying to get your local weatherâ€¦</div>
              </div>
              <div class="controls-right">
                <div class="times">
                  <div><strong>Last Updated:</strong> <span id="lastUpdated">â€”</span></div>
                  <div><strong>Next Update:</strong> <span id="nextUpdated">â€”</span></div>
                </div>
              </div>
            </section>
          
            <!-- Advanced Configuration (collapsed by default) -->
            <section class="advanced">
              <button class="adv-toggle" type="button" aria-expanded="false" aria-controls="advPanel">
                <span class="adv-label">Advanced Configuration</span>
                <span class="adv-caret" aria-hidden="true"></span>
              </button>
          
              <div id="advPanel" class="adv-panel" hidden>
                <div class="adv-grid">
                  <!-- Inputs -->
                  <div class="adv-col">
                    <h4 class="adv-h4">Inputs</h4>
                    <div class="fields-grid">
                      <label class="field">
                        <span class="field-label">Air Temp (<span id="airUnitLabel">Â°F</span>)</span>
                        <input id="temp" type="number" step="0.1" placeholder="e.g., 75" />
                      </label>
          
                      <label class="field">
                        <span class="field-label">Humidity (%)</span>
                        <input id="humidity" type="number" step="1" min="0" max="100" placeholder="e.g., 50" />
                      </label>
          
                      <label class="field">
                        <span class="field-label">Wind (mph)</span>
                        <input id="wind" type="number" step="0.1" min="0" placeholder="e.g., 5" />
                      </label>
          
                      <div class="field span-2">
                        <label class="field-label">Solar Exposure (0â€“1)</label>
                        <div class="range-row">
                          <input id="solar" type="range" min="0" max="1" step="0.1" value="0.5" />
                          <output id="solarVal" class="range-val">0.5</output>
                        </div>
                        <div class="hint">Auto-calculated from UV Index & cloud cover by default</div>
                      </div>
          
                      <label class="field">
                        <span class="field-label">Surface Reflectivity</span>
                        <select id="reflect">
                          <option value="0.2">Grass (~0.2)</option>
                          <option value="0.3" selected>Concrete (~0.3)</option>
                          <option value="0.5">Sand (~0.5)</option>
                          <option value="0.8">Snow (~0.8)</option>
                          <option value="0">Customâ€¦</option>
                        </select>
                      </label>
          
                      <label class="field">
                        <span class="field-label">Custom Reflectivity (0â€“1)</span>
                        <input id="reflectCustom" type="number" min="0" max="1" step="0.05" value="0.3" />
                      </label>
                    </div>
                  </div>
          
                  <!-- Location -->
                  <div class="adv-col">
                    <h4 class="adv-h4">Location</h4>
                    <div class="zip-row">
                      <input id="zipInput" class="zip-input" placeholder="Enter US ZIP (e.g., 20001)" />
                      <div class="zip-actions">
                        <button id="use-zip" class="btn btn--sm" type="button">Use ZIP</button>
                        <button id="clear-zip" class="btn btn--sm btn--ghost" type="button">Clear</button>
                      </div>
                    </div>
                    <div id="zipStatus" class="hint">Using device location if allowed.</div>
          
                    <hr class="adv-sep" />
          
                    <h4 class="adv-h4">Auto Updates</h4>
                    <div class="row">
                      <label class="inline">
                        <span>Update every</span>
                        <input id="updateInterval" type="number" min="0.5" step="0.5" value="1" class="w-6ch" />
                        <span>minutes</span>
                      </label>
                    </div>
                    <div class="row">
                      <label class="inline">
                        <input id="updateHourlyToggle" type="checkbox" checked />
                        <span>Refresh hourly forecast too</span>
                      </label>
                    </div>
                    <div class="row">
                      <button id="updateNow" class="btn btn--sm" type="button">Update Now</button>
                    </div>
                    <hr class="adv-sep" />
                    <h4 class="adv-h4">Graph Display</h4>
                    <div class="row">
                      <label class="inline">
                        <span>Days ahead</span>
                        <input id="daysAhead" type="number" min="1" max="7" step="1" value="2" class="w-6ch" />
                      </label>
                    </div>
                    <div class="row">
                      <label class="inline">
                        <input id="nightShadingToggle" type="checkbox" />
                        <span>Show night shading</span>
                      </label>
                    </div>
                  </div>
          
                  <!-- Formula -->
                  <div class="adv-col">
                    <h4 class="adv-h4">Formula</h4>
                    <pre class="formula">
          ShadeVibe(T, RH, Wind) = T + (RH - 40) / 15 - 0.7 Ã— Wind
          
          SunVibe(ShadeVibe, Solar, Reflect) = ShadeVibe + 8 Ã— Solar + 4 Ã— Reflect
                    </pre>
                    <div class="hint">
                      Solar is auto-derived from UV Index (vs clear-sky UV) and cloud cover, and zeroed at night.
                      Reflectivity influences how much extra radiant heat you feel.
                    </div>
                  </div>
                </div>
              </div>
            </section>
          </div>
          <div id="notification" class="notification" style="display: none;"></div>                        
    </body>
</html>